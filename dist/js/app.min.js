(()=>{"use strict";const e=[{id:0,url:"./img/lamps/lamp-1-2.png",info:{material:"Copper",dimension:"H 33 x W 15 x D 15",weight:"2,5 kg",electro:"LED 10W | G9 | 220-240V | 50 Hz"}},{id:1,url:"./img/lamps/lamp-2-2.png",info:{material:"Steel",dimension:"H 40 x W 20 x D 35",weight:"5.5 kg",electro:"LED 30W | G9 | 220-240V | 80 Hz"}}],t=[{id:0,lightMode:!0,url:"./img/sample-image/lamp_sample_light_on.png"},{id:1,lightMode:!1,url:"./img/sample-image/lamp_sample_3_light_off.png"}];var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e,t){return e(t={exports:{}},t.exports),t.exports}var o=1e3,s=60*o,i=60*s,a=24*i,c=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*i;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===n&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=a?u(e,t,a,"day"):t>=i?u(e,t,i,"hour"):t>=s?u(e,t,s,"minute"):t>=o?u(e,t,o,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=a?Math.round(e/a)+"d":t>=i?Math.round(e/i)+"h":t>=s?Math.round(e/s)+"m":t>=o?Math.round(e/o)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function u(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}var l=r((function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=function(e){function t(e){let r,o=null;function s(...e){if(!s.enabled)return;const n=s,o=Number(new Date),i=o-(r||o);n.diff=i,n.prev=r,n.curr=o,r=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";a++;const s=t.formatters[o];if("function"==typeof s){const t=e[a];r=s.call(n,t),e.splice(a,1),a--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null===o?t.enabled(e):o,set:e=>{o=e}}),"function"==typeof t.init&&t.init(s),s}function n(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=c,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}));l.formatArgs,l.save,l.load,l.useColors,l.storage,l.destroy,l.colors,l.log;let h,d="default",f="";const p=()=>{h=l(f?`fetch-mock:${d}:${f}`:`fetch-mock:${d}`)};p();var g={debug:(...e)=>{h(...e)},setDebugNamespace:e=>{f=e,p()},setDebugPhase:e=>{d=e||"default",p()},getDebug:e=>l(`fetch-mock:${d}:${e}`)};const{debug:m,setDebugPhase:y}=g,b={mock:function(...e){return y("setup"),e.length&&this.addRoute(e),this._mock()},addRoute:function(e){m("Adding route",e);const t=this.compileRoute(e),n=this.routes.filter((({identifier:e,method:n})=>!(("function"==typeof e?e!==t.identifier:String(e)!==String(t.identifier))||n&&t.method&&n!==t.method)));if(!1===this.getOption("overwriteRoutes",t)||!n.length)return this._uncompiledRoutes.push(e),this.routes.push(t);if(!0===this.getOption("overwriteRoutes",t))return n.forEach((n=>{const r=this.routes.indexOf(n);this._uncompiledRoutes.splice(r,1,e),this.routes.splice(r,1,t)})),this.routes;if(n.length)throw new Error("fetch-mock: Adding route with same name or matcher as existing route. See `overwriteRoutes` option.");this._uncompiledRoutes.push(e),this.routes.push(t)},_mock:function(){return this.isSandbox||(this.realFetch=this.realFetch||this.global.fetch,this.global.fetch=this.fetchHandler),y(),this},catch:function(e){return this.fallbackResponse&&console.warn("calling fetchMock.catch() twice - are you sure you want to overwrite the previous fallback response"),this.fallbackResponse=e||"ok",this._mock()},spy:function(e){return this._mock(),e?this.mock(e,this.getNativeFetch()):this.catch(this.getNativeFetch())}},v=(e,t,n)=>{b[e]=function(e,r,o){return this[t](e,r,Object.assign(o||{},n))}},w=(e,t)=>{b[e]=function(e,n){return this[t]({},e,n)}};v("sticky","mock",{sticky:!0}),v("once","mock",{repeat:1}),w("any","mock"),w("anyOnce","once"),["get","post","put","delete","head","patch"].forEach((e=>{v(e,"mock",{method:e}),v(`${e}Once`,"once",{method:e}),w(`${e}Any`,e),w(`${e}AnyOnce`,`${e}Once`)})),b.resetBehavior=function(e={}){(e=>{"function"==typeof e&&(console.warn("Deprecated: Passing fetch-mock reset methods\ndirectly in as handlers for before/after test runner hooks.\nWrap in an arrow function instead e.g. `() => fetchMock.restore()`"),e())})(e);const t=(({sticky:e})=>t=>e?[]:t.filter((({sticky:e})=>e)))(e);return this.routes=t(this.routes),this._uncompiledRoutes=t(this._uncompiledRoutes),this.realFetch&&!this.routes.length&&(this.global.fetch=this.realFetch,this.realFetch=void 0),this.fallbackResponse=void 0,this},b.resetHistory=function(){return this._calls=[],this._holdingPromises=[],this.routes.forEach((e=>e.reset&&e.reset())),this},b.restore=b.reset=function(e){return this.resetBehavior(e),this.resetHistory(),this};var C=b;const{getDebug:_}=g,x=["body","headers","throws","status","redirectUrl"];class k{constructor(e){this.debug=_("ResponseBuilder()"),this.debug("Response builder created with options",e),Object.assign(this,e)}exec(){this.debug("building response"),this.normalizeResponseConfig(),this.constructFetchOpts(),this.constructResponseBody();const e=new this.fetchMock.config.Response(this.body,this.options);return[e,this.buildObservableResponse(e)]}sendAsObject(){return!x.some((e=>this.responseConfig[e]))||!Object.keys(this.responseConfig).every((e=>x.includes(e)))}normalizeResponseConfig(){"number"==typeof this.responseConfig?(this.debug("building response using status",this.responseConfig),this.responseConfig={status:this.responseConfig}):("string"==typeof this.responseConfig||this.sendAsObject())&&(this.debug("building text response from",this.responseConfig),this.responseConfig={body:this.responseConfig})}validateStatus(e){if(!e)return this.debug("No status provided. Defaulting to 200"),200;if("number"==typeof e&&parseInt(e,10)!==e&&e>=200||e<600)return this.debug("Valid status provided",e),e;throw new TypeError(`fetch-mock: Invalid status ${e} passed on response object.\nTo respond with a JSON object that has status as a property assign the object to body\ne.g. {"body": {"status: "registered"}}`)}constructFetchOpts(){this.options=this.responseConfig.options||{},this.options.url=this.responseConfig.redirectUrl||this.url,this.options.status=this.validateStatus(this.responseConfig.status),this.options.statusText=this.fetchMock.statusTextMap[String(this.options.status)],this.options.headers=new this.fetchMock.config.Headers(this.responseConfig.headers||{})}getOption(e){return this.fetchMock.getOption(e,this.route)}convertToJson(){this.getOption("sendAsJson")&&null!=this.responseConfig.body&&"object"==typeof this.body&&(this.debug("Stringifying JSON response body"),this.body=JSON.stringify(this.body),this.options.headers.has("Content-Type")||this.options.headers.set("Content-Type","application/json"))}setContentLength(){this.getOption("includeContentLength")&&"string"==typeof this.body&&!this.options.headers.has("Content-Length")&&(this.debug("Setting content-length header:",this.body.length.toString()),this.options.headers.set("Content-Length",this.body.length.toString()))}constructResponseBody(){if(this.body=this.responseConfig.body,this.convertToJson(),this.setContentLength(),this.Stream){this.debug("Creating response stream");const e=new this.Stream.Readable;null!=this.body&&e.push(this.body,"utf-8"),e.push(null),this.body=e}this.body=this.body}buildObservableResponse(e){const t=this.fetchMock;return e._fmResults={},this.debug("Wrapping Response in ES proxy for observability"),new Proxy(e,{get:(n,r)=>{if(this.responseConfig.redirectUrl){if("url"===r)return this.debug("Retrieving redirect url",this.responseConfig.redirectUrl),this.responseConfig.redirectUrl;if("redirected"===r)return this.debug("Retrieving redirected status",!0),!0}return"function"==typeof n[r]?(this.debug("Wrapping body promises in ES proxies for observability"),new Proxy(n[r],{apply:(o,s,i)=>{this.debug(`Calling res.${r}`);const a=o.apply(e,i);return a.then&&(t._holdingPromises.push(a.catch((()=>null))),n._fmResults[r]=a),a}})):n[r]}})}}let R;const F=new RegExp("^[a-z]+://","i"),j=new RegExp("^//","i"),O=e=>"function"==typeof e.raw?Object.entries(e.raw()):e[Symbol.iterator]?[...e]:Object.entries(e),E=e=>e.reduce(((e,[t,n])=>Object.assign(e,{[t]:n})),{}),A=e=>{if("function"==typeof e||e instanceof RegExp||/^(begin|end|glob|express|path)\:/.test(e))return e;if(F.test(e))return new R(e).href;if(j.test(e))return new R(e,"http://dummy").href;{const t=new R(e,"http://dummy");return t.pathname+t.search}};var S={setUrlImplementation:e=>{R=e},normalizeRequest:(e,t,n)=>{if(n.prototype.isPrototypeOf(e)){const n={method:e.method},r=(async e=>{try{return"body"in e?e.body.toString():e.clone().text()}catch(e){}})(e);void 0!==r&&(n.body=r);const o={url:A(e.url),options:Object.assign(n,t),request:e,signal:t&&t.signal||e.signal},s=O(e.headers);return s.length&&(o.options.headers=E(s)),o}if("string"==typeof e||"object"==typeof e&&"href"in e)return{url:A(e),options:t,signal:t&&t.signal};throw"object"==typeof e?new TypeError("fetch-mock: Unrecognised Request object. Read the Config and Installation sections of the docs"):new TypeError("fetch-mock: Invalid arguments passed to fetch")},normalizeUrl:A,getPath:e=>(F.test(e)?new R(e):new R(e,"http://dummy")).pathname,getQuery:e=>{const t=F.test(e)?new R(e):new R(e,"http://dummy");return t.search?t.search.substr(1):""},headers:{normalize:e=>E(O(e)),toLowerCase:e=>Object.keys(e).reduce(((t,n)=>(t[n.toLowerCase()]=e[n],t)),{}),equal:(e,t)=>(e=Array.isArray(e)?e:[e],t=Array.isArray(t)?t:[t],e.length===t.length&&e.every(((e,n)=>e===t[n])))}};const{debug:M,setDebugPhase:$,getDebug:q}=g,T={};class P extends Error{constructor(){super(...arguments),this.name="AbortError",this.message="The operation was aborted.",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}T.needsAsyncBodyExtraction=function({request:e}){return e&&this.routes.some((({usesBody:e})=>e))},T.fetchHandler=function(e,t){$("handle");const n=q("fetchHandler()");n("fetch called with:",e,t);const r=S.normalizeRequest(e,t,this.config.Request);return n("Request normalised"),n("  url",r.url),n("  options",r.options),n("  request",r.request),n("  signal",r.signal),this.needsAsyncBodyExtraction(r)?(n("Need to wait for Body to be streamed before calling router: switching to async mode"),this._extractBodyThenHandle(r)):this._fetchHandler(r)},T._extractBodyThenHandle=async function(e){return e.options.body=await e.options.body,this._fetchHandler(e)},T._fetchHandler=function({url:e,options:t,request:n,signal:r}){const{route:o,callLog:s}=this.executeRouter(e,t,n);let i;return this.recordCall(s),this._holdingPromises.push(new this.config.Promise((e=>i=e))),new this.config.Promise(((a,c)=>{if(r){M("signal exists - enabling fetch abort");const e=()=>{M("aborting fetch"),c("undefined"!=typeof DOMException?new DOMException("The operation was aborted.","AbortError"):new P),i()};r.aborted&&(M("signal is already aborted - aborting the fetch"),e()),r.addEventListener("abort",e)}this.generateResponse({route:o,url:e,options:t,request:n,callLog:s}).then(a,c).then(i,i).then((()=>{$()}))}))},T.fetchHandler.isMock=!0,T.executeRouter=function(e,t,n){const r=q("executeRouter()"),o={url:e,options:t,request:n,isUnmatched:!0};if(r("Attempting to match request to a route"),"always"===this.getOption("fallbackToNetwork"))return r("  Configured with fallbackToNetwork=always - passing through to fetch"),{route:{response:this.getNativeFetch(),responseIsFetch:!0}};const s=this.router(e,t,n);if(s)return r("  Matching route found"),{route:s,callLog:{url:e,options:t,request:n,identifier:s.identifier}};if(this.getOption("warnOnFallback")&&console.warn(`Unmatched ${t&&t.method||"GET"} to ${e}`),this.fallbackResponse)return r("  No matching route found - using fallbackResponse"),{route:{response:this.fallbackResponse},callLog:o};if(!this.getOption("fallbackToNetwork"))throw new Error(`fetch-mock: No fallback response defined for ${t&&t.method||"GET"} to ${e}`);return r("  Configured to fallbackToNetwork - passing through to fetch"),{route:{response:this.getNativeFetch(),responseIsFetch:!0},callLog:o}},T.generateResponse=async function({route:e,url:t,options:n,request:r,callLog:o={}}){const s=q("generateResponse()"),i=await(async({response:e,responseIsFetch:t=!1},n,r,o)=>{const s=q("resolve()");for(s("Recursively resolving function and promise responses");;)if("function"==typeof e){if(s("  Response is a function"),t)return o?(s("  -> Calling fetch with Request instance"),e(o)):(s("  -> Calling fetch with url and options"),e(n,r));s("  -> Calling response function"),e=e(n,r,o)}else{if("function"!=typeof e.then)return s("  Response is not a function or a promise"),s("  -> Exiting response resolution recursion"),e;s("  Response is a promise"),s("  -> Resolving promise"),e=await e}})(e,t,n,r);if(i.throws&&"function"!=typeof i)throw s("response.throws is defined - throwing an error"),i.throws;if(this.config.Response.prototype.isPrototypeOf(i))return s("response is already a Response instance - returning it"),o.response=i,i;const[a,c]=(e=>new k(e).exec())({url:t,responseConfig:i,fetchMock:this,route:e});return o.response=a,c},T.router=function(e,t,n){const r=this.routes.find(((r,o)=>(M(`Trying to match route ${o}`),r.matcher(e,t,n))));if(r)return r},T.getNativeFetch=function(){const e=this.realFetch||this.isSandbox&&this.config.fetch;if(!e)throw new Error("fetch-mock: Falling back to network only available on global fetch-mock, or by setting config.fetch on sandboxed fetch-mock");return t=e,"undefined"!=typeof navigator&&navigator.vendor&&"Apple Computer, Inc."===navigator.vendor?async e=>{const{method:n}=e;if(!["POST","PUT","PATCH"].includes(n))return t(e);const r=await e.clone().text(),{cache:o,credentials:s,headers:i,integrity:a,mode:c,redirect:u,referrer:l}=e,h={body:r,cache:o,credentials:s,headers:i,integrity:a,mode:c,redirect:u,referrer:l,method:n};return t(e.url,h)}:t;var t},T.recordCall=function(e){M("Recording fetch call",e),e&&this._calls.push(e)};var U=T,N=function e(t,n,r){return t instanceof RegExp?function(e,t){if(!t)return e;var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return e}(t,n):Array.isArray(t)?function(t,n,r){for(var o=[],s=0;s<t.length;s++)o.push(e(t[s],n,r).source);return new RegExp("(?:"+o.join("|")+")",J(r))}(t,n,r):function(e,t,n){return V(H(e,n),t,n)}(t,n,r)},L=H,z=D,I=V,B=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function H(e,t){for(var n,r=[],o=0,s=0,i="",a=t&&t.delimiter||"/",c=t&&t.delimiters||"./",u=!1;null!==(n=B.exec(e));){var l=n[0],h=n[1],d=n.index;if(i+=e.slice(s,d),s=d+l.length,h)i+=h[1],u=!0;else{var f="",p=e[s],g=n[2],m=n[3],y=n[4],b=n[5];if(!u&&i.length){var v=i.length-1;c.indexOf(i[v])>-1&&(f=i[v],i=i.slice(0,v))}i&&(r.push(i),i="",u=!1);var w=""!==f&&void 0!==p&&p!==f,C="+"===b||"*"===b,_="?"===b||"*"===b,x=f||a,k=m||y;r.push({name:g||o++,prefix:f,delimiter:x,optional:_,repeat:C,partial:w,pattern:k?G(k):"[^"+W(x)+"]+?"})}}return(i||s<e.length)&&r.push(i+e.substr(s)),r}function D(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var o="",s=r&&r.encode||encodeURIComponent,i=0;i<e.length;i++){var a=e[i];if("string"!=typeof a){var c,u=n?n[a.name]:void 0;if(Array.isArray(u)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but got array');if(0===u.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var l=0;l<u.length;l++){if(c=s(u[l],a),!t[i].test(c))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'"');o+=(0===l?a.prefix:a.delimiter)+c}}else if("string"!=typeof u&&"number"!=typeof u&&"boolean"!=typeof u){if(!a.optional)throw new TypeError('Expected "'+a.name+'" to be '+(a.repeat?"an array":"a string"));a.partial&&(o+=a.prefix)}else{if(c=s(String(u),a),!t[i].test(c))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but got "'+c+'"');o+=a.prefix+c}}else o+=a}return o}}function W(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function G(e){return e.replace(/([=!:$/()])/g,"\\$1")}function J(e){return e&&e.sensitive?"":"i"}function V(e,t,n){for(var r=(n=n||{}).strict,o=!1!==n.start,s=!1!==n.end,i=W(n.delimiter||"/"),a=n.delimiters||"./",c=[].concat(n.endsWith||[]).map(W).concat("$").join("|"),u=o?"^":"",l=0===e.length,h=0;h<e.length;h++){var d=e[h];if("string"==typeof d)u+=W(d),l=h===e.length-1&&a.indexOf(d[d.length-1])>-1;else{var f=d.repeat?"(?:"+d.pattern+")(?:"+W(d.delimiter)+"(?:"+d.pattern+"))*":d.pattern;t&&t.push(d),d.optional?d.partial?u+=W(d.prefix)+"("+f+")?":u+="(?:"+W(d.prefix)+"("+f+"))?":u+=W(d.prefix)+"("+f+")"}}return s?(r||(u+="(?:"+i+")?"),u+="$"===c?"$":"(?="+c+")"):(r||(u+="(?:"+i+"(?="+c+"))?"),l||(u+="(?="+i+"|"+c+")")),new RegExp(u,J(n))}function K(e,t){return Object.prototype.hasOwnProperty.call(e,t)}N.parse=L,N.compile=function(e,t){return D(H(e,t))},N.tokensToFunction=z,N.tokensToRegExp=I;var Z,Q=function(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var i=1e3;r&&"number"==typeof r.maxKeys&&(i=r.maxKeys);var a=e.length;i>0&&a>i&&(a=i);for(var c=0;c<a;++c){var u,l,h,d,f=e[c].replace(s,"%20"),p=f.indexOf(n);p>=0?(u=f.substr(0,p),l=f.substr(p+1)):(u=f,l=""),h=decodeURIComponent(u),d=decodeURIComponent(l),K(o,h)?Array.isArray(o[h])?o[h].push(d):o[h]=[o[h],d]:o[h]=d}return o},X=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Y=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(r){var o=encodeURIComponent(X(r))+n;return Array.isArray(e[r])?e[r].map((function(e){return o+encodeURIComponent(X(e))})).join(t):o+encodeURIComponent(X(e[r]))})).join(t):r?encodeURIComponent(X(r))+n+encodeURIComponent(X(e)):""},ee=r((function(e,t){t.decode=t.parse=Q,t.encode=t.stringify=Y})),te=(ee.decode,ee.parse,ee.encode,ee.stringify,r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return"object"==typeof e&&null!==e&&"object"==typeof t&&null!==t&&Object.keys(t).every((function(r){if(!e.propertyIsEnumerable(r))return!1;var o=t[r],s=e[r];return!!("object"==typeof o&&null!==o?n(s,o):s===o)}))}));t.default=n,e.exports=t.default})));(Z=te)&&Z.__esModule&&Object.prototype.hasOwnProperty.call(Z,"default")&&Z.default;var ne=r((function(e,t){var r="__lodash_hash_undefined__",o=9007199254740991,s="[object Arguments]",i="[object Array]",a="[object Boolean]",c="[object Date]",u="[object Error]",l="[object Function]",h="[object Map]",d="[object Number]",f="[object Object]",p="[object Promise]",g="[object RegExp]",m="[object Set]",y="[object String]",b="[object WeakMap]",v="[object ArrayBuffer]",w="[object DataView]",C=/^\[object .+?Constructor\]$/,_=/^(?:0|[1-9]\d*)$/,x={};x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x[s]=x[i]=x[v]=x[a]=x[w]=x[c]=x[u]=x[l]=x[h]=x[d]=x[f]=x[g]=x[m]=x[y]=x[b]=!1;var k="object"==typeof n&&n&&n.Object===Object&&n,R="object"==typeof self&&self&&self.Object===Object&&self,F=k||R||Function("return this")(),j=t&&!t.nodeType&&t,O=j&&e&&!e.nodeType&&e,E=O&&O.exports===j,A=E&&k.process,S=function(){try{return A&&A.binding&&A.binding("util")}catch(e){}}(),M=S&&S.isTypedArray;function $(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function q(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function T(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var P,U,N,L=Array.prototype,z=Function.prototype,I=Object.prototype,B=F["__core-js_shared__"],H=z.toString,D=I.hasOwnProperty,W=(P=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"",G=I.toString,J=RegExp("^"+H.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=E?F.Buffer:void 0,K=F.Symbol,Z=F.Uint8Array,Q=I.propertyIsEnumerable,X=L.splice,Y=K?K.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=V?V.isBuffer:void 0,ne=(U=Object.keys,N=Object,function(e){return U(N(e))}),re=Oe(F,"DataView"),oe=Oe(F,"Map"),se=Oe(F,"Promise"),ie=Oe(F,"Set"),ae=Oe(F,"WeakMap"),ce=Oe(Object,"create"),ue=Me(re),le=Me(oe),he=Me(se),de=Me(ie),fe=Me(ae),pe=K?K.prototype:void 0,ge=pe?pe.valueOf:void 0;function me(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function be(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ve(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new be;++t<n;)this.add(e[t])}function we(e){var t=this.__data__=new ye(e);this.size=t.size}function Ce(e,t){for(var n=e.length;n--;)if($e(e[n][0],t))return n;return-1}function _e(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Y&&Y in Object(e)?function(e){var t=D.call(e,Y),n=e[Y];try{e[Y]=void 0;var r=!0}catch(e){}var o=G.call(e);return r&&(t?e[Y]=n:delete e[Y]),o}(e):function(e){return G.call(e)}(e)}function xe(e){return ze(e)&&_e(e)==s}function ke(e,t,n,r,o){return e===t||(null==e||null==t||!ze(e)&&!ze(t)?e!=e&&t!=t:function(e,t,n,r,o,l){var p=Te(e),b=Te(t),C=p?i:Ae(e),_=b?i:Ae(t),x=(C=C==s?f:C)==f,k=(_=_==s?f:_)==f,R=C==_;if(R&&Pe(e)){if(!Pe(t))return!1;p=!0,x=!1}if(R&&!x)return l||(l=new we),p||Ie(e)?Re(e,t,n,r,o,l):function(e,t,n,r,o,s,i){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case v:return!(e.byteLength!=t.byteLength||!s(new Z(e),new Z(t)));case a:case c:case d:return $e(+e,+t);case u:return e.name==t.name&&e.message==t.message;case g:case y:return e==t+"";case h:var l=q;case m:var f=1&r;if(l||(l=T),e.size!=t.size&&!f)return!1;var p=i.get(e);if(p)return p==t;r|=2,i.set(e,t);var b=Re(l(e),l(t),r,o,s,i);return i.delete(e),b;case"[object Symbol]":if(ge)return ge.call(e)==ge.call(t)}return!1}(e,t,C,n,r,o,l);if(!(1&n)){var F=x&&D.call(e,"__wrapped__"),j=k&&D.call(t,"__wrapped__");if(F||j){var O=F?e.value():e,E=j?t.value():t;return l||(l=new we),o(O,E,n,r,l)}}return!!R&&(l||(l=new we),function(e,t,n,r,o,s){var i=1&n,a=Fe(e),c=a.length;if(c!=Fe(t).length&&!i)return!1;for(var u=c;u--;){var l=a[u];if(!(i?l in t:D.call(t,l)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var d=!0;s.set(e,t),s.set(t,e);for(var f=i;++u<c;){var p=e[l=a[u]],g=t[l];if(r)var m=i?r(g,p,l,t,e,s):r(p,g,l,e,t,s);if(!(void 0===m?p===g||o(p,g,n,r,s):m)){d=!1;break}f||(f="constructor"==l)}if(d&&!f){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(d=!1)}return s.delete(e),s.delete(t),d}(e,t,n,r,o,l))}(e,t,n,r,ke,o))}function Re(e,t,n,r,o,s){var i=1&n,a=e.length,c=t.length;if(a!=c&&!(i&&c>a))return!1;var u=s.get(e);if(u&&s.get(t))return u==t;var l=-1,h=!0,d=2&n?new ve:void 0;for(s.set(e,t),s.set(t,e);++l<a;){var f=e[l],p=t[l];if(r)var g=i?r(p,f,l,t,e,s):r(f,p,l,e,t,s);if(void 0!==g){if(g)continue;h=!1;break}if(d){if(!$(t,(function(e,t){if(i=t,!d.has(i)&&(f===e||o(f,e,n,r,s)))return d.push(t);var i}))){h=!1;break}}else if(f!==p&&!o(f,p,n,r,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function Fe(e){return function(e,t,n){var r=t(e);return Te(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Be,Ee)}function je(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Oe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Le(e)||function(e){return!!W&&W in e}(e))&&(Ue(e)?J:C).test(Me(e))}(n)?n:void 0}me.prototype.clear=function(){this.__data__=ce?ce(null):{},this.size=0},me.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},me.prototype.get=function(e){var t=this.__data__;if(ce){var n=t[e];return n===r?void 0:n}return D.call(t,e)?t[e]:void 0},me.prototype.has=function(e){var t=this.__data__;return ce?void 0!==t[e]:D.call(t,e)},me.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ce&&void 0===t?r:t,this},ye.prototype.clear=function(){this.__data__=[],this.size=0},ye.prototype.delete=function(e){var t=this.__data__,n=Ce(t,e);return!(n<0||(n==t.length-1?t.pop():X.call(t,n,1),--this.size,0))},ye.prototype.get=function(e){var t=this.__data__,n=Ce(t,e);return n<0?void 0:t[n][1]},ye.prototype.has=function(e){return Ce(this.__data__,e)>-1},ye.prototype.set=function(e,t){var n=this.__data__,r=Ce(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},be.prototype.clear=function(){this.size=0,this.__data__={hash:new me,map:new(oe||ye),string:new me}},be.prototype.delete=function(e){var t=je(this,e).delete(e);return this.size-=t?1:0,t},be.prototype.get=function(e){return je(this,e).get(e)},be.prototype.has=function(e){return je(this,e).has(e)},be.prototype.set=function(e,t){var n=je(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ve.prototype.add=ve.prototype.push=function(e){return this.__data__.set(e,r),this},ve.prototype.has=function(e){return this.__data__.has(e)},we.prototype.clear=function(){this.__data__=new ye,this.size=0},we.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},we.prototype.get=function(e){return this.__data__.get(e)},we.prototype.has=function(e){return this.__data__.has(e)},we.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ye){var r=n.__data__;if(!oe||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new be(r)}return n.set(e,t),this.size=n.size,this};var Ee=ee?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var r=-1,o=null==t?0:t.length,s=0,i=[];++r<o;){var a=t[r];c=a,Q.call(e,c)&&(i[s++]=a)}var c;return i}(ee(e)))}:function(){return[]},Ae=_e;function Se(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||_.test(e))&&e>-1&&e%1==0&&e<t}function Me(e){if(null!=e){try{return H.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function $e(e,t){return e===t||e!=e&&t!=t}(re&&Ae(new re(new ArrayBuffer(1)))!=w||oe&&Ae(new oe)!=h||se&&Ae(se.resolve())!=p||ie&&Ae(new ie)!=m||ae&&Ae(new ae)!=b)&&(Ae=function(e){var t=_e(e),n=t==f?e.constructor:void 0,r=n?Me(n):"";if(r)switch(r){case ue:return w;case le:return h;case he:return p;case de:return m;case fe:return b}return t});var qe=xe(function(){return arguments}())?xe:function(e){return ze(e)&&D.call(e,"callee")&&!Q.call(e,"callee")},Te=Array.isArray,Pe=te||function(){return!1};function Ue(e){if(!Le(e))return!1;var t=_e(e);return t==l||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ne(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function Le(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ze(e){return null!=e&&"object"==typeof e}var Ie=M?function(e){return function(t){return e(t)}}(M):function(e){return ze(e)&&Ne(e.length)&&!!x[_e(e)]};function Be(e){return null!=(t=e)&&Ne(t.length)&&!Ue(t)?function(e,t){var n=Te(e),r=!n&&qe(e),o=!n&&!r&&Pe(e),s=!n&&!r&&!o&&Ie(e),i=n||r||o||s,a=i?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=a.length;for(var u in e)!t&&!D.call(e,u)||i&&("length"==u||o&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Se(u,c))||a.push(u);return a}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||I))return ne(e);var t,n,r=[];for(var o in Object(e))D.call(e,o)&&"constructor"!=o&&r.push(o);return r}(e);var t}e.exports=function(e,t){return ke(e,t)}}));const{debug:re}=g,{headers:oe,getPath:se,getQuery:ie,normalizeUrl:ae}=S,ce=e=>t=>(re("Actual url:",t),e(t)),ue={begin:e=>ce((t=>0===t.indexOf(e))),end:e=>ce((t=>t.substr(-e.length)===e)),glob:e=>{const t=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");for(var n,r=String(e),o="",s=!1,i=!1,a="",c=0,u=r.length;c<u;c++)switch(n=r[c]){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":o+="\\"+n;break;case"?":s;case"[":case"]":s;case"{":s;case"}":s;case",":if(i){o+="|";break}o+="\\"+n;break;case"*":for(r[c-1];"*"===r[c+1];)c++;r[c+1];o+=".*";break;default:o+=n}return a&&~a.indexOf("g")||(o="^"+o+"$"),new RegExp(o,a)}(e);return ce((e=>t.test(e)))},express:e=>{const t=N(e);return ce((e=>t.test(se(e))))},path:e=>ce((t=>se(t)===e))},le=(e,t,n)=>{re("  Matching using full url",t);const r=ae(t);return re("  Normalised url to:",t),e.identifier===t&&(re("  Updating route identifier to match normalized url:",t),e.identifier=r),e=>(re("Expected url:",r),re("Actual url:",e),n&&r.indexOf("?")?(re("Ignoring query string when matching url"),0===e.indexOf(r)):ae(e)===r)};var he=[{name:"query",matcher:({query:e})=>{if(re("Generating query parameters matcher"),!e)return void re("  No query parameters expectations defined - skipping");const t=ee.parse(ee.stringify(e));re("  Expected query parameters:",e);const n=Object.keys(t);return e=>{re("Attempting to match query parameters");const r=ee.parse(ie(e));return re("  Expected query parameters:",t),re("  Actual query parameters:",r),n.every((e=>Array.isArray(r[e])?!!Array.isArray(t[e])&&ne(r[e].sort(),t[e].sort()):r[e]===t[e]))}}},{name:"method",matcher:({method:e})=>{if(re("Generating method matcher"),e)return re("  Expected method:",e),(t,{method:n})=>{re("Attempting to match method");const r=n?n.toLowerCase():"get";return re("  Expected method:",e),re("  Actual method:",r),e===r};re("  No method expectations defined - skipping")}},{name:"headers",matcher:({headers:e})=>{if(re("Generating header matcher"),!e)return void re("  No header expectations defined - skipping");const t=oe.toLowerCase(e);return re("  Expected headers:",t),(e,{headers:n={}})=>{re("Attempting to match headers");const r=oe.toLowerCase(oe.normalize(n));return re("  Expected headers:",t),re("  Actual headers:",r),Object.keys(t).every((e=>oe.equal(r[e],t[e])))}}},{name:"params",matcher:({params:e,url:t})=>{if(re("Generating path parameters matcher"),!e)return void re("  No path parameters expectations defined - skipping");if(!/express:/.test(t))throw new Error("fetch-mock: matching on params is only possible when using an express: matcher");re("  Expected path parameters:",e);const n=Object.keys(e),r=[],o=N(t.replace(/^express:/,""),r);return t=>{re("Attempting to match path parameters");const s=o.exec(se(t))||[];s.shift();const i=r.reduce(((e,{name:t},n)=>s[n]?Object.assign(e,{[t]:s[n]}):e),{});return re("  Expected path parameters:",e),re("  Actual path parameters:",i),n.every((t=>i[t]===e[t]))}}},{name:"body",matcher:(e,t)=>{const n=t.getOption("matchPartialBody",e),{body:r}=e;return re("Generating body matcher"),(e,{body:t,method:o="get"})=>{if(re("Attempting to match body"),"get"===o.toLowerCase())return re("  GET request - skip matching body"),!0;let s;try{re("  Parsing request body as JSON"),s=JSON.parse(t)}catch(e){re("  Failed to parse request body as JSON",e)}return re("Expected body:",r),re("Actual body:",s),n&&re("matchPartialBody is true - checking for partial match only"),s&&(n?te(s,r):ne(s,r))}},usesBody:!0},{name:"functionMatcher",matcher:({functionMatcher:e})=>(re("Detected user defined function matcher",e),(...t)=>(re("Calling function matcher with arguments",t),e(...t)))},{name:"url",matcher:e=>{re("Generating url matcher");const{url:t,query:n}=e;if("*"===t)return re("  Using universal * rule to match any url"),()=>!0;if(t instanceof RegExp)return re("  Using regular expression to match url:",t),e=>t.test(e);if(t.href)return re("  Using URL object to match url",t),le(e,t.href,n);for(const e in ue)if(0===t.indexOf(e+":")){re(`  Using ${e}: pattern to match url`,t);const n=t.replace(new RegExp(`^${e}:`),"");return ue[e](n)}return le(e,t,n)}}];const{debug:de,setDebugNamespace:fe,getDebug:pe}=g,ge=e=>e instanceof RegExp||"string"==typeof e||"object"==typeof e&&"href"in e;class me{constructor(e,t){this.fetchMock=t,pe("compileRoute()")("Compiling route"),this.init(e),this.sanitize(),this.validate(),this.generateMatcher(),this.limit(),this.delayResponse()}validate(){if(!("response"in this))throw new Error("fetch-mock: Each route must define a response");if(!me.registeredMatchers.some((({name:e})=>e in this)))throw new Error("fetch-mock: Each route must specify some criteria for matching calls to fetch. To match all calls use '*'")}init(e){const[t,n,r={}]=e,o={};ge(t)||(e=>"function"==typeof e)(t)?o.matcher=t:Object.assign(o,t),void 0!==n&&(o.response=n),Object.assign(o,r),Object.assign(this,o)}sanitize(){const e=pe("sanitize()");e("Sanitizing route properties"),this.method&&(e(`Converting method ${this.method} to lower case`),this.method=this.method.toLowerCase()),ge(this.matcher)&&(e("Mock uses a url matcher",this.matcher),this.url=this.matcher,delete this.matcher),this.functionMatcher=this.matcher||this.functionMatcher,e("Setting route.identifier..."),e(`  route.name is ${this.name}`),e(`  route.url is ${this.url}`),e(`  route.functionMatcher is ${this.functionMatcher}`),this.identifier=this.name||this.url||this.functionMatcher,e(`  -> route.identifier set to ${this.identifier}`)}generateMatcher(){fe("generateMatcher()"),de("Compiling matcher for route");const e=me.registeredMatchers.map((({name:e,matcher:t,usesBody:n})=>this[e]&&{matcher:t(this,this.fetchMock),usesBody:n})).filter((e=>Boolean(e)));this.usesBody=e.some((({usesBody:e})=>e)),de("Compiled matcher for route"),fe(),this.matcher=(t,n={},r)=>e.every((({matcher:e})=>e(t,n,r)))}limit(){const e=pe("limit()");if(e("Limiting number of requests to handle by route"),!this.repeat)return void e("  No `repeat` value set on route. Will match any number of requests");e(`  Route set to repeat ${this.repeat} times`);const t=this.matcher;let n=this.repeat;this.matcher=(e,r)=>{if(n&&t(e,r))return n--,!0},this.reset=()=>n=this.repeat}delayResponse(){const e=pe("delayResponse()");if(e("Applying response delay settings"),this.delay){e(`  Wrapping response in delay of ${this.delay} miliseconds`);const t=this.response;this.response=()=>(e(`Delaying response by ${this.delay} miliseconds`),new Promise((e=>setTimeout((()=>e(t)),this.delay))))}else e("  No delay set on route. Will respond 'immediately' (but asynchronously)")}static addMatcher(e){me.registeredMatchers.push(e)}}me.registeredMatchers=[],he.forEach(me.addMatcher);var ye=me;const{setDebugPhase:be,setDebugNamespace:ve,debug:we}=g,{normalizeUrl:Ce}=S,_e={},xe=function(e,t={},n){return({matcher:e}=new ye([Object.assign({matcher:e,response:"ok"},t)],this)),n.filter((({url:t,options:n})=>e(Ce(t),n)))},ke=e=>function(...t){be("inspect");const n=e.call(this,...t);return be(),n},Re=e=>{if(!e)return;const{url:t,options:n,request:r,identifier:o,isUnmatched:s,response:i}=e,a=[t,n];return a.request=r,a.identifier=o,a.isUnmatched=s,a.response=i,a};_e.filterCalls=function(e,t){we("Filtering fetch calls");let n=this._calls,r="*";return[!0,"matched"].includes(e)?(we(`Filter provided is ${e}. Returning matched calls only`),n=n.filter((({isUnmatched:e})=>!e))):[!1,"unmatched"].includes(e)?(we(`Filter provided is ${e}. Returning unmatched calls only`),n=n.filter((({isUnmatched:e})=>e))):void 0===e?(we("Filter provided is undefined. Returning all calls"),n=n):(e=>"string"==typeof e&&/^[\da-zA-Z\-]+$/.test(e))(e)?(we("Filter provided, looks like the name of a named route. Returning only calls handled by that route"),n=n.filter((({identifier:t})=>t===e))):(r="*"===e?"*":Ce(e),this.routes.some((({identifier:e})=>e===r))&&(we(`Filter provided, ${e}, identifies a route. Returning only calls handled by that route`),n=n.filter((e=>e.identifier===r)))),(t||"*"!==r)&&n.length&&("string"==typeof t&&(t={method:t}),we("Compiling filter and options to route in order to filter all calls",e),n=xe.call(this,r,t,n)),we(`Retrieved ${n.length} calls`),n.map(Re)},_e.calls=ke((function(e,t){return we("retrieving matching calls"),this.filterCalls(e,t)})),_e.lastCall=ke((function(e,t){return we("retrieving last matching call"),[...this.filterCalls(e,t)].pop()})),_e.lastUrl=ke((function(e,t){return we("retrieving url of last matching call"),(this.lastCall(e,t)||[])[0]})),_e.lastOptions=ke((function(e,t){return we("retrieving options of last matching call"),(this.lastCall(e,t)||[])[1]})),_e.lastResponse=ke((function(e,t){we("retrieving respose of last matching call"),console.warn("When doing all the following:\n- using node-fetch\n- responding with a real network response (using spy() or fallbackToNetwork)\n- using `fetchMock.LastResponse()`\n- awaiting the body content\n... the response will hang unless your source code also awaits the response body.\nThis is an unavoidable consequence of the nodejs implementation of streams.\n");const n=(this.lastCall(e,t)||[]).response;try{return n.clone()}catch(e){return Object.entries(n._fmResults).forEach((([e,t])=>{n[e]=()=>t})),n}})),_e.called=ke((function(e,t){return we("checking if matching call was made"),Boolean(this.filterCalls(e,t).length)})),_e.flush=ke((async function(e){ve("flush"),we(`flushing all fetch calls. ${e?"":"Not "}waiting for response bodies to complete download`);const t=this._holdingPromises;this._holdingPromises=[],we(`${t.length} fetch calls to be awaited`),await Promise.all(t),we("All fetch calls have completed"),e&&this._holdingPromises.length&&(we("Awaiting all fetch bodies to download"),await this.flush(e),we("All fetch bodies have completed downloading")),ve()})),_e.done=ke((function(e){let t;be("inspect"),ve("done"),we("Checking to see if expected calls have been made"),e&&"boolean"!=typeof e?(we("Checking to see if expected calls have been made for single route:",e),t=[{identifier:e}]):(we("Checking to see if expected calls have been made for all routes"),t=this.routes);const n=t.map((({identifier:e})=>{if(!this.called(e))return we("No calls made for route:",e),console.warn(`Warning: ${e} not called`),!1;const t=(this.routes.find((t=>t.identifier===e))||{}).repeat;if(!t)return we("Route has been called at least once, and no expectation of more set:",e),!0;const n=this.filterCalls(e).length;return we(`Route called ${n} times:`,e),!(t>n&&(we(`Route called ${n} times, but expected ${t}:`,e),console.warn(`Warning: ${e} only called ${n} times, but ${t} expected`),1))})).every((e=>e));return ve(),be(),n}));var Fe=_e;const{debug:je}=g,Oe=Object.assign({},U,C,Fe);Oe.addMatcher=function(e){ye.addMatcher(e)},Oe.config={fallbackToNetwork:!1,includeContentLength:!0,sendAsJson:!0,warnOnFallback:!0,overwriteRoutes:void 0},Oe.createInstance=function(){je("Creating fetch-mock instance");const e=Object.create(Oe);return e._uncompiledRoutes=(this._uncompiledRoutes||[]).slice(),e.routes=e._uncompiledRoutes.map((e=>this.compileRoute(e))),e.fallbackResponse=this.fallbackResponse||void 0,e.config=Object.assign({},this.config||Oe.config),e._calls=[],e._holdingPromises=[],e.bindMethods(),e},Oe.compileRoute=function(e){return new ye(e,this)},Oe.bindMethods=function(){this.fetchHandler=Oe.fetchHandler.bind(this),this.reset=this.restore=Oe.reset.bind(this),this.resetHistory=Oe.resetHistory.bind(this),this.resetBehavior=Oe.resetBehavior.bind(this)},Oe.sandbox=function(){je("Creating sandboxed fetch-mock instance");const e=Object.assign(((t,n)=>e.fetchHandler(t,n)),Oe,this.createInstance(),{Headers:this.config.Headers,Request:this.config.Request,Response:this.config.Response});return e.bindMethods(),e.isSandbox=!0,e.default=e,e},Oe.getOption=function(e,t={}){return e in t?t[e]:this.config[e]};var Ee=Oe;const Ae="undefined"!=typeof window?window:self,{setUrlImplementation:Se}=S;Se(Ae.URL),Ee.global=Ae,Ee.statusTextMap={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},Ee.config=Object.assign(Ee.config,{Promise:Ae.Promise,Request:Ae.Request,Response:Ae.Response,Headers:Ae.Headers});const Me=Ee.createInstance();!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="https://www.gstatic.com/webp/gallery/1.webp"}(),Me.mock("https://lampshop.docs.apiary.io/#reference/0/questions-collection",200),fetch("https://lampshop.docs.apiary.io/#reference/0/questions-collection").then((e=>e.json())).then((e=>console.log(e))),(()=>{let e=document.querySelector(".info-text-container");const t=document.querySelector(".main-container"),n=document.querySelector(".info-block"),r=()=>{document.body.clientWidth<1200?(e.classList.add("info-text-container_text-in-adaptive"),t.prepend(e)):(e.classList.remove("info-text-container_text-in-adaptive"),n.prepend(e))};window.onload=r,window.onresize=r})(),(()=>{document.querySelectorAll(".lamp-switcher__item").forEach(((t,n,r)=>{t.addEventListener("click",(()=>{document.querySelector(".lamp-param--img img").src=`${e[n].url}`,document.querySelectorAll(".lamp-param__tech-description p").forEach(((t,r,o)=>{let s=Object.keys(e[n].info)[r];"<br>"==t.children[0].nextSibling.outerHTML?t.children[0].nextSibling.nextSibling.textContent=e[n].info[s]:t.children[0].nextSibling.textContent=e[n].info[s]}))}))}));const n=document.querySelectorAll(".lamp-switcher__button");console.log(n),n.forEach(((e,n)=>{e.addEventListener("click",(()=>{console.log(e),e.classList.contains("lamp-switcher__button--on")?document.getElementById("img-prev").parentElement.style.backgroundImage=`url('${t[0].url}')`:document.getElementById("img-prev").parentElement.style.backgroundImage=`url('${t[1].url}')`}))}))})()})();